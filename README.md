# Домашнее задание: Автотесты

## Введение

Для данной домашней работы применялись:

- **jest** для unit тестов
- **playwright** для e2e тестов

Если возникнуть трудности или появятся вопросы, то пишите в телеграмм: https://t.me/rruslan_10

## Запуск

```sh
# установите зависимости
npm i

# соберите клиентский код приложения
npm run build

# запустите сервер
npm run start

# установите зависимости playwright
npx install playwright
```

После этого можете открыть приложение в браузере по адресу http://localhost:3000/hw/store

## Стартовый прогон всех тестов и создание эталлонных скриншотов

```
npm run setup
```

> **Обратите внимание**: это нужно для того, чтобы в проекте появились эталонные скриншоты с которыми потом будем сравнивать. Поэтому после запуска этой команды e2e тесты упадут. Можете в отчете тестов глянуть на эталонные скриншоты.

## Прогон тестов и проверка

```sh
# запуск всех тестов (e2e и unit)
npm run test

# запуcк только e2e тестов
npm run test:e2e

# запуcк только unit тестов
npm run test:unit
```

> **Обратите внимание**: если хотите отлавливать конкретный баг,то перед каждым запуском тестов вам необходимо задать BUG_ID от 0 до 10 (где 0 - это запуск без багов)

```sh
#запуск всех тестов (e2e и unit) без багов
BUG_ID=0 npm run test
```

**После этого вы увидите, что все тесты пройдены**

Затем меняйте BUG_ID для проверки каждого бага. Например:

```sh
#запуск всех тестов (e2e и unit) с багом
BUG_ID=8 npm run test

#запуск unit тестов с багом
BUG_ID=1 npm run test:unit

#запуск e2e тестов с багом
BUG_ID=9 npm run test:unit
```

> **Обратите внимание**:
>
> - Баги с айди: **1-3** проверяются **unit** тестами. Результаты тестов можете видеть в терминале
> - Баги с айди: **4-10** проверяются **e2e** тестами. Результаты тестов можете видеть скриншотами в браузере. Скриншот показывает на каком моменте упал тест.

В данной работе было написано всего 3 unit теста и три полноценных e2e теста, которые имитируют действия пользователя от захода на страницы до покупки товара.
Если задаете какой-то BUG ID, то скриншот конкретно вам покажет на каком этапе тест упал.
